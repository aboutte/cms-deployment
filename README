#TODO:


# cms-deployment

## Summary

This repository contains the tools to create a wordPress deployment in an AWS environment.

https://github.com/bazaarvoice/cloudformation-ruby-dsl

## Using Expanded .json Templates

The expanded CloudFormation templaes can be found in the [![expanded](https://github.com/andyboutte/cms-deployment/tree/master/cloudformation/applications/cms/expanded)](https://github.com/andyboutte/cms-deployment/tree/master/cloudformation/applications/cms/expanded) directory.


## Installing from GitHub

### Prerequisites

- AWS credentials setup.  Example using environment variables in `~/.bash_profile`:

```
export AWS_ACCESS_KEY_ID="xxxxxxxx"
export AWS_SECRET_ACCESS_KEY="xxxxxxxx"
```
- A sane Ruby environment setup on your workstation.  The recommended approach would be to install the [![ChefDK](https://downloads.chef.io/chef-dk/)](https://downloads.chef.io/chef-dk/)

### Install

```
# Clone repo from GitHuh
git clone https://github.com/andyboutte/cms-deployment.git
cd cms-deployment
gem install bundler
bundle install
```

## Usage

Usage:

```
$ ./cms.rb
usage: ./cms.rb <expand|diff|validate|create|update|cancel-update|delete|describe|describe-resource|get-template>
```

Launching CloudFormation stack:

```bundle exec ./cms.rb create --region us-west-2 --stack-name test-$(date '+%s') --disable-rollback --parameters "Application=wordpress;Environment=production"```

Expand Ruby CloudFormation template into json:

```
bundle exec ./cms.rb expand --parameters "Application=wordpress;Environment=production"
```

